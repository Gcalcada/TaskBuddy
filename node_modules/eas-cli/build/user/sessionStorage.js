"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getSessionSecret = exports.getAccessToken = exports.setSessionAsync = exports.getSession = void 0;
const tslib_1 = require("tslib");
const json_file_1 = tslib_1.__importDefault(require("@expo/json-file"));
const paths_1 = require("../utils/paths");
function getSession() {
    var _a, _b;
    try {
        return (_b = (_a = json_file_1.default.read((0, paths_1.getStateJsonPath)())) === null || _a === void 0 ? void 0 : _a.auth) !== null && _b !== void 0 ? _b : null;
    }
    catch (error) {
        if (error.code === 'ENOENT') {
            return null;
        }
        throw error;
    }
}
exports.getSession = getSession;
async function setSessionAsync(sessionData) {
    await json_file_1.default.setAsync((0, paths_1.getStateJsonPath)(), 'auth', sessionData, {
        default: {},
        ensureDir: true,
    });
}
exports.setSessionAsync = setSessionAsync;
function getAccessToken() {
    var _a;
    return (_a = process.env.EXPO_TOKEN) !== null && _a !== void 0 ? _a : null;
}
exports.getAccessToken = getAccessToken;
function getSessionSecret() {
    var _a, _b;
    return (_b = (_a = getSession()) === null || _a === void 0 ? void 0 : _a.sessionSecret) !== null && _b !== void 0 ? _b : null;
}
exports.getSessionSecret = getSessionSecret;
